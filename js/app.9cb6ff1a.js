(function(){var e={5415:function(e,t,n){"use strict";var o=n(5130),s=n(6768);const a={id:"app"};function r(e,t,n,o,r,i){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(l)])}var i={name:"App"},l=n(1241);const d=(0,l.A)(i,[["render",r]]);var c=d,m=n(1387),u=n(4232);const h=e=>((0,s.Qi)("data-v-d4c56b9c"),e=e(),(0,s.jt)(),e),g={class:"segment-selector"},p={style:{width:"100%"}},y=h((()=>(0,s.Lk)("h1",{style:{"text-align":"center"}},"Video Segment Selector",-1))),f=["value"],v=["href"],S={class:"content-area"},b={class:"video-url-input"},k=h((()=>(0,s.Lk)("label",{for:"videoUrl"},"Video URL:",-1)));function T(e,t,n,a,r,i){const l=(0,s.g2)("YouTubePlayer"),d=(0,s.g2)("SegmentItem"),c=(0,s.g2)("draggable");return(0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("header",null,[(0,s.Lk)("div",p,[y,(0,s.Lk)("div",null,[(0,s.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>i.loadJson&&i.loadJson(...e)),ref:"fileInput",style:{display:"none"}},null,544),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.triggerFileInput&&i.triggerFileInput(...e))},"Load JSON File"),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.saveJson&&i.saveJson(...e))},"Save/Download JSON File")]),(0,s.Lk)("div",null,[(0,s.eW)(" Style: "),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.selectedStyle=e),onChange:t[4]||(t[4]=()=>{console.log("selectedStyle",this.selectedStyle)})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.styleOptions,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.name),9,f)))),128))],544),[[o.u1,r.selectedStyle]]),(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.createSharableLink&&i.createSharableLink(...e))},"Create a Sharable Link"),r.sharableLink?((0,s.uX)(),(0,s.CE)("a",{key:0,href:r.sharableLink,target:"_blank"},"Open Sharable Link",8,v)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",S,[(0,s.Lk)("main",null,[(0,s.Lk)("div",b,[k,(0,s.bo)((0,s.Lk)("input",{id:"videoUrl","onUpdate:modelValue":t[6]||(t[6]=e=>r.videoUrl=e),type:"text",placeholder:"Enter YouTube video URL",class:"video-url-input-field"},null,512),[[o.Jo,r.videoUrl]]),(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.applyVideoUrl&&i.applyVideoUrl(...e))},"Apply")]),(0,s.bF)(l,{class:"youtube-player",ref:"youtubePlayer",videoId:r.selectedVideoId,startTime:r.selectedSegment.startTime,pauseTime:r.selectedSegment.endTime},null,8,["videoId","startTime","pauseTime"])]),(0,s.Lk)("aside",null,[(0,s.bF)(c,{modelValue:r.segments,"onUpdate:modelValue":t[9]||(t[9]=e=>r.segments=e),"item-key":"id",onEnd:i.onEnd,class:"segments-list"},{header:(0,s.k6)((()=>[(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.addSegment&&i.addSegment(...e))},"Add New Segment")])),item:(0,s.k6)((({element:e,index:t})=>[((0,s.uX)(),(0,s.Wv)(d,{segment:e,key:e.id,index:t,class:(0,u.C4)({"selected-segment":e===r.selectedSegment}),onClick:()=>i.selectSegment(e),onDeleteSegment:i.removeSegment,onSetStartTime:()=>i.setCurrentTime(e,"start"),onSetEndTime:()=>i.setCurrentTime(e,"end")},null,8,["segment","index","class","onClick","onDeleteSegment","onSetStartTime","onSetEndTime"]))])),_:1},8,["modelValue","onEnd"])])])])}n(4114),n(4979),n(4603),n(7566),n(8721);var w=n(1527),C=n.n(w);const I={class:"youtube-player",ref:"youtubePlayer"};function P(e,t,n,o,a,r){return(0,s.uX)(),(0,s.CE)("div",I,null,512)}var L={name:"YouTubePlayer",props:{videoId:String,startTime:Number,pauseTime:Number,enablePause:{type:Boolean,default:!0}},watch:{videoId:{immediate:!0,handler(e){e&&this.loadVideo(e)}},startTime:{immediate:!1,handler(e){void 0!==e&&this.player&&"function"===typeof this.player.seekTo&&(this.player.seekTo(e,!0),this.player.playVideo())}},pauseTime(e,t){e!==t&&this.player&&"function"===typeof this.player.getPlayerState&&this.startCheckingPlayProgress()}},methods:{loadVideo(e){const t=this;function n(){console.log("Initializing YouTube Player with video ID:",e,"and start time:",t.startTime),t.player=new window.YT.Player(t.$refs.youtubePlayer,{height:"390",width:"640",videoId:e,playerVars:{mute:1,autoplay:1,start:t.startTime,end:t.pauseTime,rel:0},events:{onReady:t.onPlayerReady,onStateChange:t.onPlayerStateChange,onAutoplayBlocked:e=>{console.log("onAutoplayBlocked",e,e.target.getPlayerState())}}})}if(window.YT)t.player?t.player.loadVideoById({videoId:e,startSeconds:t.startTime,endSeconds:t.pauseTime}):n();else{const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=n}},onPlayerReady(e){this.$emit("player-ready",e)},onPlayerStateChange(e){console.log("onPlayerStateChange",e.data,this.isInit),e.data===window.YT.PlayerState.UNSTARTED||e.data===window.YT.PlayerState.CUED?(console.log("Autoplay might be blocked, attempting to play video."),e.target.mute(),e.target.playVideo()):this.isInit&&(e.target.seekTo(this.startTime,!0),this.startCheckingPlayProgress(),this.isInit=!1)},getCurrentTime(){if(this.player&&"function"===typeof this.player.getCurrentTime){const e=this.player.getCurrentTime();return e}},setStartTime(e){console.log("setStartTime",e),this.player&&"function"===typeof this.player.seekTo&&this.player.seekTo(e,!0)},startCheckingPlayProgress(){this.checkPlayProgressInterval&&clearInterval(this.checkPlayProgressInterval),this.checkPlayProgressInterval=setInterval(this.checkPlayProgress,500)},checkPlayProgress(){const e=this.getCurrentTime();this.pauseTime&&e>=this.pauseTime&&(console.log("over-pause-time"),this.$emit("over-pause-time"),this.enablePause&&(console.log("pauseVideo"),this.player.pauseVideo(),this.checkPlayProgressInterval&&(clearInterval(this.checkPlayProgressInterval),this.checkPlayProgressInterval=null)))}},mounted(){this.isInit=!0},beforeUnmount(){this.player&&this.player.destroy&&this.player.destroy()}};const x=(0,l.A)(L,[["render",P],["__scopeId","data-v-5287b208"]]);var E=x;const O={class:"segment-item"},U={key:0},V={key:1};function R(e,t,n,a,r,i){return(0,s.uX)(),(0,s.CE)("div",O,[n.isReadOnly?((0,s.uX)(),(0,s.CE)("div",U,"Name: "+(0,u.v_)(r.localSegment.name),1)):((0,s.uX)(),(0,s.CE)("div",V,[(0,s.eW)("Name: "),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.localSegment.name=e),placeholder:"Segment name"},null,512),[[o.Jo,r.localSegment.name]])])),(0,s.Lk)("div",null,"Video id: "+(0,u.v_)(r.localSegment.videoId),1),(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"Start: "+(0,u.v_)(i.formatTime(r.localSegment.startTime))+" ",1),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("set-start-time",r.localSegment)),class:"time-setter fa fa-pencil",title:"Set with the current play time"}))]),(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"End: "+(0,u.v_)(i.formatTime(r.localSegment.endTime))+" ",1),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",{key:0,onClick:t[2]||(t[2]=t=>e.$emit("set-end-time",r.localSegment)),class:"time-setter fa fa-pencil",title:"Set with the current play time"}))]),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:2,class:"delete-button",onClick:t[3]||(t[3]=t=>e.$emit("delete-segment",n.segment))},"X"))])}var F={props:{segment:Object,isReadOnly:{type:Boolean,default:!1}},data(){return{localSegment:this.segment}},methods:{formatTime(e){const t=(e,t)=>("000"+e).slice(-1*t),n=parseFloat(e).toFixed(3),o=Math.floor(n/60/60),s=Math.floor(n/60)%60,a=Math.floor(n-60*s);return t(o,2)+":"+t(s,2)+":"+t(a,2)},deleteSegment(){this.$emit("delete-segment",this.index)}}};const J=(0,l.A)(F,[["render",R],["__scopeId","data-v-0d612a20"]]);var _=J;const A={methods:{decodeQueryParam(e){return decodeURIComponent(window.atob(e))},convertFromCompact(e){return e.map((e=>({name:e[0],videoId:e[1],startTime:e[2],endTime:e[3]})))},convertToCompactFormat(e){return e.map((e=>[e.name,e.videoId,Math.round(e.startTime),Math.round(e.endTime)]))}}};var X=n(8355);function N(e){return X.A.get(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(e)}`).then((e=>e.data)).catch((t=>(console.error("Erreur lors de la création de l’URL courte :",t),e)))}var Y={mixins:[A],components:{YouTubePlayer:E,draggable:C(),SegmentItem:_},name:"SegmentSelector",data(){return{videoUrl:"https://www.youtube.com/watch?v=et5Jb68dnio&t=4098s",selectedVideoId:"",segments:[],selectedSegment:{},filterText:"",sharableLink:"",maxSegmentId:0,styleOptions:[{id:"",name:"Default"},{id:"mma",name:"Momentum"}],selectedStyle:""}},watch:{segments:{handler(e){sessionStorage.setItem("segments",JSON.stringify(e))},deep:!0}},computed:{filteredSegments(){return this.segments.filter((e=>e.name.toLowerCase().includes(this.filterText.toLowerCase())))}},methods:{triggerFileInput(){this.$refs.fileInput.click()},loadJson(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;try{const e=JSON.parse(t);this.segments=this.convertFromCompact(e)}catch(n){console.error("Error parsing JSON:",n)}},e.readAsText(t)}},saveJson(){const e=this.convertToCompactFormat(this.segments),t=JSON.stringify(e);this.downloadJson(t,"segments.json")},downloadJson(e,t){const n=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)},createSharableLink(){const e=this.convertToCompactFormat(this.segments),t=JSON.stringify(e),n=btoa(encodeURIComponent(t)),o=this.selectedStyle&&"/"+this.selectedStyle||"",s=`${window.location.href}viewer${o}?data=${n}`;s.length>2e3?alert("The generated link is too long and might not be supported by some browsers. Please reduce the number of segments."):N(s).then((e=>{this.sharableLink=e,this.copyToClipboard(e)}))},copyToClipboard(e){navigator.clipboard.writeText(e).then((()=>{alert("Sharable link created and copied to clipboard!"),console.log("Text copied to clipboard")})).catch((e=>{console.error("Error in copying text: ",e),alert("Automatic copy failed. Please copy the text manually")}))},applyVideoUrl(){const e=this.extractVideoId(this.videoUrl);e?this.selectedVideoId=e:console.error("Invalid YouTube URL")},extractVideoId(e){const t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null},removeSegment(e){this.segments.splice(e,1)},addSegment(){const e=this.extractVideoId(this.videoUrl);e?(this.segments.push({id:this.maxSegmentId++,name:"",videoId:e,startTime:this.$refs.youtubePlayer.getCurrentTime(),endTime:0}),this.selectSegment(this.segments[this.segments.length-1])):console.error("Invalid YouTube URL")},selectSegment(e){this.selectedSegment=e,this.videoUrl="https://www.youtube.com/watch?v="+e.videoId,this.applyVideoUrl()},setCurrentTime(e,t){"start"===t?e.startTime=this.$refs.youtubePlayer.getCurrentTime():"end"===t&&(e.endTime=this.$refs.youtubePlayer.getCurrentTime())},onEnd(e){const t=e.oldIndex-1,n=e.newIndex-1;console.log(`Moved item from index ${t} to ${n}`)}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("data");if(t){const e=this.decodeQueryParam(t);try{const t=JSON.parse(e);this.segments=this.convertFromCompact(t),sessionStorage.setItem("segments",JSON.stringify(this.segments));const n=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.pushState({path:n},"",n)}catch(n){console.error("Error parsing segments data:",n)}}else{const e=sessionStorage.getItem("segments");e&&(this.segments=JSON.parse(e))}this.segments=this.segments.filter((e=>e)),this.segments&&this.segments.length&&(this.selectSegment(this.segments[0]),this.segments.forEach((e=>e.id=this.maxSegmentId++)))}};const $=(0,l.A)(Y,[["render",T],["__scopeId","data-v-d4c56b9c"]]);var j=$;const M=e=>((0,s.Qi)("data-v-e2c9d9ea"),e=e(),(0,s.jt)(),e),Q={class:"viewer-interface"},B={key:1},D={class:"content-area"},W=M((()=>(0,s.Lk)("h2",null,"Segments",-1))),H={class:"segments-list"};function z(e,t,n,a,r,i){const l=(0,s.g2)("Momentum"),d=(0,s.g2)("YouTubePlayer"),c=(0,s.g2)("SegmentItem");return(0,s.uX)(),(0,s.CE)("div",Q,[(0,s.Lk)("header",null,["mma"===n.customHeader?((0,s.uX)(),(0,s.Wv)(l,{key:0})):((0,s.uX)(),(0,s.CE)("h1",B,"Video Segment Viewer"))]),(0,s.Lk)("div",D,[(0,s.Lk)("main",null,[(0,s.bF)(d,{class:"youtube-player",ref:"youtubePlayer",videoId:r.selectedSegment.videoId,startTime:r.selectedSegment.startTime,pauseTime:r.selectedSegment.endTime,onOverPauseTime:i.nextSegment,enablePause:r.autoPause},null,8,["videoId","startTime","pauseTime","onOverPauseTime","enablePause"])]),(0,s.Lk)("aside",null,[W,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.filterText=e),type:"text",placeholder:"Filter segments by name"},null,512),[[o.Jo,r.filterText]])]),(0,s.Lk)("div",null,[(0,s.Lk)("ul",H,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.filteredSegments,((e,t)=>((0,s.uX)(),(0,s.Wv)(c,{key:t,segment:e,index:t,class:(0,u.C4)({"selected-segment":e===r.selectedSegment}),onClick:t=>i.selectSegment(e),"is-read-only":!0},null,8,["segment","index","class","onClick"])))),128))])])])])])}const K={style:{"background-color":"hsla(0, 100%, 50%, 1)",width:"100%"}},q=(0,s.Lk)("a",{href:"https://www.momentum-movement.ca/"},[(0,s.Lk)("img",{elementtiming:"nbf-header-logo-desktop",src:"https://images.squarespace-cdn.com/content/v1/63a61ed2a637cd7b726fd375/2f4bfd8a-bcf3-4fdd-ae81-eb0dfcfd2f8d/mma-logo-website3.png?format=1500w",alt:"Momentum Movement Academy",style:{display:"block"},fetchpriority:"high",loading:"eager",decoding:"async","data-loader":"raw"})],-1),Z=[q];function G(e,t,n,o,a,r){return(0,s.uX)(),(0,s.CE)("div",K,Z)}var ee={};const te=(0,l.A)(ee,[["render",G]]);var ne=te,oe={mixins:[A],components:{YouTubePlayer:E,SegmentItem:_,Momentum:ne},name:"ViewerInterface",props:{customHeader:{type:String,default:""}},data(){return{segments:[],selectedSegment:{},filterText:"",autoPause:!1}},computed:{filteredSegments(){return this.segments.filter((e=>e.name.toLowerCase().includes(this.filterText.toLowerCase())))}},methods:{nextSegment(){console.log("nextSegment.");const e=this.filteredSegments;if(e&&e.length){const t=e.findIndex((e=>e===this.selectedSegment)),n=t+1;if(n<e.length){const t=e[n];this.selectSegment(t)}else console.log("You've reached the end of the segments list.")}},selectSegment(e){this.selectedSegment=e;const t=this.filteredSegments,n=t&&t.length&&e===t[t.length-1];this.autoPause=!!n}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("data");if(t){const e=this.decodeQueryParam(t);try{const t=JSON.parse(e);this.segments=this.convertFromCompact(t)}catch(n){console.error("Error parsing segments data:",n)}}this.segments&&this.segments.length&&this.selectSegment(this.segments[0])}};const se=(0,l.A)(oe,[["render",z],["__scopeId","data-v-e2c9d9ea"]]);var ae=se;const re=[{path:"/",redirect:{name:"SegmentSelector"}},{path:"/YTClipPlaylist/",name:"SegmentSelector",component:j},{path:"/YTClipPlaylist/viewer/:customHeader?",name:"ViewerInterface",component:ae,props:!0}],ie=(0,m.aE)({history:(0,m.LA)("/YTClipPlaylist/"),routes:re});var le=ie,de=n(5129),ce=n.n(de);(0,o.Ef)(c).use(ce()).use(le).mount("#app")},5129:function(){}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],a=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var c=l(n)}for(t&&t(o);d<r.length;d++)a=r[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkytclipplaylist"]=self["webpackChunkytclipplaylist"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(5415)}));o=n.O(o)})();
//# sourceMappingURL=app.9cb6ff1a.js.map