(function(){var e={7570:function(e,t,n){"use strict";var o=n(5130),s=n(6768);const a={id:"app"};function i(e,t,n,o,i,r){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(l)])}var r={name:"App"},l=n(1241);const d=(0,l.A)(r,[["render",i]]);var c=d,m=n(1387),u=n(4232);const g=e=>((0,s.Qi)("data-v-cb2a1c06"),e=e(),(0,s.jt)(),e),h={class:"segment-selector"},p=g((()=>(0,s.Lk)("h1",null,"Video Segment Selector",-1))),y=["href"],f={class:"content-area"},v={class:"video-url-input"},S=g((()=>(0,s.Lk)("label",{for:"videoUrl"},"Video URL:",-1)));function b(e,t,n,a,i,r){const l=(0,s.g2)("YouTubePlayer"),d=(0,s.g2)("SegmentItem"),c=(0,s.g2)("draggable");return(0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("header",null,[p,(0,s.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>r.loadJson&&r.loadJson(...e)),ref:"fileInput",style:{display:"none"}},null,544),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.triggerFileInput&&r.triggerFileInput(...e))},"Load JSON File"),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.saveJson&&r.saveJson(...e))},"Save/Download JSON File"),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.createSharableLink&&r.createSharableLink(...e))},"Create a Sharable Link"),i.sharableLink?((0,s.uX)(),(0,s.CE)("a",{key:0,href:i.sharableLink,target:"_blank"},"Open Sharable Link",8,y)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",f,[(0,s.Lk)("main",null,[(0,s.Lk)("div",v,[S,(0,s.bo)((0,s.Lk)("input",{id:"videoUrl","onUpdate:modelValue":t[4]||(t[4]=e=>i.videoUrl=e),type:"text",placeholder:"Enter YouTube video URL",class:"video-url-input-field"},null,512),[[o.Jo,i.videoUrl]]),(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.applyVideoUrl&&r.applyVideoUrl(...e))},"Apply")]),(0,s.bF)(l,{class:"youtube-player",ref:"youtubePlayer",videoId:i.selectedVideoId,startTime:i.selectedSegment.startTime,pauseTime:i.selectedSegment.endTime},null,8,["videoId","startTime","pauseTime"])]),(0,s.Lk)("aside",null,[(0,s.bF)(c,{modelValue:i.segments,"onUpdate:modelValue":t[7]||(t[7]=e=>i.segments=e),"item-key":"id",onEnd:r.onEnd,class:"segments-list"},{header:(0,s.k6)((()=>[(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.addSegment&&r.addSegment(...e))},"Add New Segment")])),item:(0,s.k6)((({element:e,index:t})=>[((0,s.uX)(),(0,s.Wv)(d,{segment:e,key:e.id,index:t,class:(0,u.C4)({"selected-segment":e===i.selectedSegment}),onClick:()=>r.selectSegment(e),onDeleteSegment:r.removeSegment,onSetStartTime:()=>r.setCurrentTime(e,"start"),onSetEndTime:()=>r.setCurrentTime(e,"end")},null,8,["segment","index","class","onClick","onDeleteSegment","onSetStartTime","onSetEndTime"]))])),_:1},8,["modelValue","onEnd"])])])])}n(4114),n(4979),n(4603),n(7566),n(8721);var T=n(1527),k=n.n(T);const w={class:"youtube-player",ref:"youtubePlayer"};function I(e,t,n,o,a,i){return(0,s.uX)(),(0,s.CE)("div",w,null,512)}var C={name:"YouTubePlayer",props:{videoId:String,startTime:Number,pauseTime:Number,enablePause:{type:Boolean,default:!0}},watch:{videoId:{immediate:!0,handler(e){e&&this.loadVideo(e)}},startTime:{immediate:!1,handler(e){void 0!==e&&this.player&&"function"===typeof this.player.seekTo&&(this.player.seekTo(e,!0),this.player.playVideo())}},pauseTime(e,t){e!==t&&this.player&&"function"===typeof this.player.getPlayerState&&this.startCheckingPlayProgress()}},methods:{loadVideo(e){const t=this;function n(){console.log("Initializing YouTube Player with video ID:",e,"and start time:",t.startTime),t.player=new window.YT.Player(t.$refs.youtubePlayer,{height:"390",width:"640",videoId:e,playerVars:{mute:1,autoplay:1,start:t.startTime,end:t.pauseTime,rel:0},events:{onReady:t.onPlayerReady,onStateChange:t.onPlayerStateChange,onAutoplayBlocked:e=>{console.log("onAutoplayBlocked",e,e.target.getPlayerState())}}})}if(window.YT)t.player?t.player.loadVideoById({videoId:e,startSeconds:t.startTime,endSeconds:t.pauseTime}):n();else{const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=n}},onPlayerReady(e){this.$emit("player-ready",e)},onPlayerStateChange(e){console.log("onPlayerStateChange",e.data,this.isInit),e.data===window.YT.PlayerState.UNSTARTED||e.data===window.YT.PlayerState.CUED?(console.log("Autoplay might be blocked, attempting to play video."),e.target.mute(),e.target.playVideo()):this.isInit&&(e.target.seekTo(this.startTime,!0),this.startCheckingPlayProgress(),this.isInit=!1)},getCurrentTime(){if(this.player&&"function"===typeof this.player.getCurrentTime){const e=this.player.getCurrentTime();return e}},setStartTime(e){console.log("setStartTime",e),this.player&&"function"===typeof this.player.seekTo&&this.player.seekTo(e,!0)},startCheckingPlayProgress(){this.checkPlayProgressInterval&&clearInterval(this.checkPlayProgressInterval),this.checkPlayProgressInterval=setInterval(this.checkPlayProgress,500)},checkPlayProgress(){const e=this.getCurrentTime();this.pauseTime&&e>=this.pauseTime&&(console.log("over-pause-time"),this.$emit("over-pause-time"),this.enablePause&&(console.log("pauseVideo"),this.player.pauseVideo(),this.checkPlayProgressInterval&&(clearInterval(this.checkPlayProgressInterval),this.checkPlayProgressInterval=null)))}},mounted(){this.isInit=!0},beforeUnmount(){this.player&&this.player.destroy&&this.player.destroy()}};const P=(0,l.A)(C,[["render",I],["__scopeId","data-v-5287b208"]]);var L=P;const x={class:"segment-item"},O={key:0},E={key:1};function U(e,t,n,a,i,r){return(0,s.uX)(),(0,s.CE)("div",x,[n.isReadOnly?((0,s.uX)(),(0,s.CE)("div",O,"Name: "+(0,u.v_)(i.localSegment.name),1)):((0,s.uX)(),(0,s.CE)("div",E,[(0,s.eW)("Name: "),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.localSegment.name=e),placeholder:"Segment name"},null,512),[[o.Jo,i.localSegment.name]])])),(0,s.Lk)("div",null,"Video id: "+(0,u.v_)(i.localSegment.videoId),1),(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"Start: "+(0,u.v_)(r.formatTime(i.localSegment.startTime))+" ",1),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",{key:0,onClick:t[1]||(t[1]=t=>e.$emit("set-start-time",i.localSegment)),class:"time-setter fa fa-pencil",title:"Set with the current play time"}))]),(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"End: "+(0,u.v_)(r.formatTime(i.localSegment.endTime))+" ",1),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",{key:0,onClick:t[2]||(t[2]=t=>e.$emit("set-end-time",i.localSegment)),class:"time-setter fa fa-pencil",title:"Set with the current play time"}))]),n.isReadOnly?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:2,class:"delete-button",onClick:t[3]||(t[3]=t=>e.$emit("delete-segment",n.segment))},"X"))])}var V={props:{segment:Object,isReadOnly:{type:Boolean,default:!1}},data(){return{localSegment:this.segment}},methods:{formatTime(e){const t=(e,t)=>("000"+e).slice(-1*t),n=parseFloat(e).toFixed(3),o=Math.floor(n/60/60),s=Math.floor(n/60)%60,a=Math.floor(n-60*s);return t(o,2)+":"+t(s,2)+":"+t(a,2)},deleteSegment(){this.$emit("delete-segment",this.index)}}};const F=(0,l.A)(V,[["render",U],["__scopeId","data-v-3e8f08b0"]]);var J=F;const R={methods:{decodeQueryParam(e){return decodeURIComponent(window.atob(e))},convertFromCompact(e){return e.map((e=>({name:e[0],videoId:e[1],startTime:e[2],endTime:e[3]})))},convertToCompactFormat(e){return e.map((e=>[e.name,e.videoId,Math.round(e.startTime),Math.round(e.endTime)]))}}};var _={mixins:[R],components:{YouTubePlayer:L,draggable:k(),SegmentItem:J},name:"SegmentSelector",data(){return{videoUrl:"https://www.youtube.com/watch?v=et5Jb68dnio&t=4098s",selectedVideoId:"",segments:[],selectedSegment:{},filterText:"",sharableLink:"",maxSegmentId:0}},watch:{segments:{handler(e){sessionStorage.setItem("segments",JSON.stringify(e))},deep:!0}},computed:{filteredSegments(){return this.segments.filter((e=>e.name.toLowerCase().includes(this.filterText.toLowerCase())))}},methods:{triggerFileInput(){this.$refs.fileInput.click()},loadJson(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;try{const e=JSON.parse(t);this.segments=this.convertFromCompactFormat(e)}catch(n){console.error("Error parsing JSON:",n)}},e.readAsText(t)}},saveJson(){const e=this.convertToCompactFormat(this.segments),t=JSON.stringify(e);this.downloadJson(t,"segments.json")},downloadJson(e,t){const n=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)},createSharableLink(){const e=this.convertToCompactFormat(this.segments),t=JSON.stringify(e),n=btoa(encodeURIComponent(t)),o=`${window.location.origin}/viewer?data=${n}`;o.length>2e3?alert("The generated link is too long and might not be supported by some browsers. Please reduce the number of segments."):(this.sharableLink=o,window.focus(),this.copyToClipboard(o))},copyToClipboard(e){navigator.clipboard.writeText(e).then((()=>{alert("Sharable link created and copied to clipboard!"),console.log("Text copied to clipboard")})).catch((e=>{console.error("Error in copying text: ",e),alert("Automatic copy failed. Please copy the text manually")}))},applyVideoUrl(){const e=this.extractVideoId(this.videoUrl);e?this.selectedVideoId=e:console.error("Invalid YouTube URL")},extractVideoId(e){const t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null},removeSegment(e){this.segments.splice(e,1)},addSegment(){const e=this.extractVideoId(this.videoUrl);e?(this.segments.push({id:this.maxSegmentId++,name:"",videoId:e,startTime:this.$refs.youtubePlayer.getCurrentTime(),endTime:0}),this.selectSegment(this.segments[this.segments.length-1])):console.error("Invalid YouTube URL")},selectSegment(e){this.selectedSegment=e,this.videoUrl="https://www.youtube.com/watch?v="+e.videoId,this.applyVideoUrl()},setCurrentTime(e,t){"start"===t?e.startTime=this.$refs.youtubePlayer.getCurrentTime():"end"===t&&(e.endTime=this.$refs.youtubePlayer.getCurrentTime())},onEnd(e){const t=e.oldIndex-1,n=e.newIndex-1;console.log(`Moved item from index ${t} to ${n}`)}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("data");if(t){const e=this.decodeQueryParam(t);try{const t=JSON.parse(e);this.segments=this.convertFromCompact(t),sessionStorage.setItem("segments",JSON.stringify(this.segments));const n=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.pushState({path:n},"",n)}catch(n){console.error("Error parsing segments data:",n)}}else{const e=sessionStorage.getItem("segments");e&&(this.segments=JSON.parse(e))}this.segments=this.segments.filter((e=>e)),this.segments&&this.segments.length&&(this.selectSegment(this.segments[0]),this.segments.forEach((e=>e.id=this.maxSegmentId++)))}};const N=(0,l.A)(_,[["render",b],["__scopeId","data-v-cb2a1c06"]]);var A=N;const Y=e=>((0,s.Qi)("data-v-05e82494"),e=e(),(0,s.jt)(),e),j={class:"viewer-interface"},X=Y((()=>(0,s.Lk)("header",null,[(0,s.Lk)("h1",null,"Video Segment Viewer")],-1))),$={class:"content-area"},M=Y((()=>(0,s.Lk)("h2",null,"Segments",-1))),Q={class:"segments-list"};function B(e,t,n,a,i,r){const l=(0,s.g2)("YouTubePlayer"),d=(0,s.g2)("SegmentItem");return(0,s.uX)(),(0,s.CE)("div",j,[X,(0,s.Lk)("div",$,[(0,s.Lk)("main",null,[(0,s.bF)(l,{class:"youtube-player",ref:"youtubePlayer",videoId:i.selectedSegment.videoId,startTime:i.selectedSegment.startTime,pauseTime:i.selectedSegment.endTime,onOverPauseTime:r.nextSegment},null,8,["videoId","startTime","pauseTime","onOverPauseTime"])]),(0,s.Lk)("aside",null,[M,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),type:"text",placeholder:"Filter segments by name"},null,512),[[o.Jo,i.filterText]])]),(0,s.Lk)("div",null,[(0,s.Lk)("ul",Q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredSegments,((e,t)=>((0,s.uX)(),(0,s.Wv)(d,{key:t,segment:e,index:t,class:(0,u.C4)({"selected-segment":e===i.selectedSegment}),onClick:t=>r.selectSegment(e),"is-read-only":!0},null,8,["segment","index","class","onClick"])))),128))])])])])])}var D={mixins:[R],components:{YouTubePlayer:L,SegmentItem:J},name:"ViewerInterface",data(){return{segments:[],selectedSegment:{},filterText:""}},computed:{filteredSegments(){return this.segments.filter((e=>e.name.toLowerCase().includes(this.filterText.toLowerCase())))}},methods:{nextSegment(){console.log("nextSegment.");const e=this.filteredSegments;if(e&&e.length){const t=e.findIndex((e=>e===this.selectedSegment)),n=t+1;if(n<e.length){const t=e[n];this.selectSegment(t)}else console.log("You've reached the end of the segments list.")}},selectSegment(e){this.selectedSegment=e}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("data");if(t){const e=this.decodeQueryParam(t);try{const t=JSON.parse(e);this.segments=this.convertFromCompact(t)}catch(n){console.error("Error parsing segments data:",n)}}this.segments&&this.segments.length&&this.selectSegment(this.segments[0])}};const W=(0,l.A)(D,[["render",B],["__scopeId","data-v-05e82494"]]);var z=W;const K=[{path:"/",name:"SegmentSelector",component:A},{path:"/viewer",name:"ViewerInterface",component:z}],Z=(0,m.aE)({history:(0,m.LA)("/YTClipPlaylist/"),routes:K});var q=Z,G=n(5129),H=n.n(G);(0,o.Ef)(c).use(H()).use(q).mount("#app")},5129:function(){}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],a=e[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,a<i&&(i=a));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,i=o[0],r=o[1],l=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(t&&t(o);d<i.length;d++)a=i[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkytclipplaylist"]=self["webpackChunkytclipplaylist"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(7570)}));o=n.O(o)})();
//# sourceMappingURL=app.88533e3b.js.map